<template>
  <div id="building">
    <div>
      <svg 
        class="svg-left"
        width="1260"
        height="1243"
        viewBox="0 0 1260 1243"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_f_460_2056)">
          <path
            d="M977.821 563.377C829.16 424.252 204.728 785.508 195.649 793.712C-173.953 1069.89 647.724 1095.49 667.054 1099.58C426.391 826.866 929.825 707.849 977.821 563.377Z"
            fill="#3B37FF"
          />
          <path
            d="M868.737 391.963C894.209 270.298 571.766 356.261 407.36 414.45C256.415 555.917 584.253 891.924 630.915 740.984C704.009 504.545 836.897 544.045 868.737 391.963Z"
            fill="#37E7FF"
          />
          <path
            d="M820.676 422.4C853.839 285.782 481.598 401.48 291.333 476.406C101.807 550.868 588.317 1016.95 506.647 826.675C424.977 636.398 779.223 593.174 820.676 422.4Z"
            fill="#FF37D3"
          />
          <path
            d="M797.539 418.248C714.743 340.943 367.248 541.378 362.197 545.931C156.533 699.192 613.941 713.651 624.703 715.927C490.653 564.411 770.863 498.465 797.539 418.248Z"
            fill="#EB1B1B"
          />
          <path
            d="M944.508 515.102C967.562 439.095 678.972 539.994 531.795 599.945C470.336 624.12 558.87 695.931 638.537 821.604C718.204 947.277 771.361 849.293 795.371 709.472C819.381 569.65 915.69 610.111 944.508 515.102Z"
            fill="#FFF500"
          />
          <path
            d="M757.578 520.615C754.436 491.54 473.801 598.69 333.876 655.898C416.613 747.325 581.597 906.281 579.638 810.701C577.189 691.225 644.445 625.486 677.252 604.303C710.059 583.12 761.506 556.958 757.578 520.615Z"
            fill="white"
          />
        </g>
        <g
          style="mix-blend-mode: color-dodge"
          filter="url(#filter1_f_460_2056)"
        >
          <path
            d="M1065.71 451.462C889.662 349.171 362.013 841.112 355.002 851.141C56.6508 1203.08 863.184 1043.99 882.939 1043.64C587.308 831.77 1051.29 603.014 1065.71 451.462Z"
            fill="#3B37FF"
          />
          <path
            d="M839.749 304.499C865.222 182.834 542.778 268.797 378.373 326.986C227.428 468.453 555.265 804.46 601.928 653.52C675.022 417.08 807.909 456.58 839.749 304.499Z"
            fill="#37E7FF"
          />
          <path
            d="M991.373 525.049C1035.32 467.681 665.561 601.576 462.029 579.054C272.504 653.516 759.013 1119.6 677.344 929.324C595.674 739.046 884.504 664.551 991.373 525.049Z"
            fill="#FF37D3"
          />
          <path
            d="M773.313 252.83C673.457 199.351 389.007 482.218 385.292 487.915C225.825 688.805 671.636 585.445 682.622 584.885C514.191 472.825 768.107 337.205 773.313 252.83Z"
            fill="#EB1B1B"
          />
          <path
            d="M806.843 647.419C864.561 592.854 563.925 537.33 406.392 516.389C341.034 506.897 382.294 613.164 389.138 761.804C395.982 910.443 490.739 851.727 580.938 742.225C671.136 632.722 734.696 715.624 806.843 647.419Z"
            fill="#FFF500"
          />
          <path
            d="M802.531 550.036C799.843 520.916 517.57 623.674 376.769 678.692C458.069 771.398 620.553 932.91 620.085 837.31C619.501 717.811 687.775 653.129 720.908 632.461C754.042 611.793 805.891 586.436 802.531 550.036Z"
            fill="white"
          />
        </g>
        <defs>
          <filter
            id="filter0_f_460_2056"
            x="0.203735"
            y="230.264"
            width="1077.62"
            height="969.312"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2056"
            />
          </filter>
          <filter
            id="filter1_f_460_2056"
            x="188.857"
            y="142.8"
            width="976.852"
            height="1037.01"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2056"
            />
          </filter>
        </defs>
      </svg>

      <svg
        class="svg-top"
        width="982"
        height="826"
        viewBox="0 0 982 826"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_f_460_2055)">
          <path
            d="M746.323 503.165C731.078 527.353 339.845 816.359 188.887 216.2C264.274 102.856 591.922 360.283 746.323 503.165Z"
            fill="#37E7FF"
          />
          <path
            d="M289.994 170.979C240.345 285.413 273.516 478.271 612.688 532.834C998.962 594.975 563.547 240.73 289.994 170.979Z"
            fill="#3B37FF"
          />
        </g>
        <g
          style="mix-blend-mode: color-dodge"
          filter="url(#filter1_f_460_2055)"
        >
          <path
            d="M608.978 481.359C589.772 503.174 207.963 751.269 298.896 178.189C391.769 76.2018 544.314 337.808 608.978 481.359Z"
            fill="#37E7FF"
          />
          <path
            d="M192.674 186.281C171.099 329.303 276.303 550.353 705.621 556.477C1194.56 563.452 547.611 221.484 192.674 186.281Z"
            fill="#3B37FF"
          />
        </g>
        <defs>
          <filter
            id="filter0_f_460_2055"
            x="88.8867"
            y="70.9792"
            width="776.615"
            height="622.834"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2055"
            />
          </filter>
          <filter
            id="filter1_f_460_2055"
            x="90.0315"
            y="55.1758"
            width="891.728"
            height="601.406"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2055"
            />
          </filter>
        </defs>
      </svg>

      <svg
        class="svg-right"
        width="1659"
        height="1767"
        viewBox="0 0 1659 1767"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_f_460_2054)">
          <path
            d="M297.295 1209.64C368.572 1343.53 895.809 1239.33 904.186 1235.73C1231.28 1130.1 756.16 907.139 743.518 899.599C667.677 1270.73 365.941 1119.36 297.295 1209.64Z"
            fill="#3B37FF"
          />
          <path
            d="M297.503 1006.17C368.569 1129.74 860.642 1016.91 868.4 1013.3C1172.42 904.856 823.037 654.521 810.93 647.809C690.858 924.591 519.019 956.014 297.503 1006.17Z"
            fill="#37E7FF"
          />
          <path
            d="M382.326 1039.81C571.373 1105.26 780.64 943.806 801.591 860.386C789.658 653.615 795.347 330.17 715.477 654.152C626.001 1017.1 98.3444 941.507 382.326 1039.81Z"
            fill="#FF37D3"
          />
          <path
            d="M383.54 994.229C361.947 1053.99 663.758 1012.36 807.679 941.16C999.642 778.256 910.562 542.264 746.714 743.109C697.089 803.939 673.723 912.921 489.475 940.43C449.654 946.376 389.354 978.137 383.54 994.229Z"
            fill="white"
          />
        </g>
        <g
          style="mix-blend-mode: color-dodge"
          filter="url(#filter1_f_460_2054)"
        >
          <path
            d="M252.436 1111.25C350.391 1172.71 1152.36 971.425 1179.26 1151.09C1678.78 989.776 953.196 649.282 933.89 637.768C981.154 520.417 306.682 677.177 252.436 1111.25Z"
            fill="#3B37FF"
          />
          <path
            d="M340.509 1090.17C411.575 1213.74 903.647 1100.91 911.406 1097.3C1215.43 988.856 866.043 738.521 853.936 731.808C733.864 1008.59 562.024 1040.01 340.509 1090.17Z"
            fill="#37E7FF"
          />
          <path
            d="M482.586 806.084C671.633 871.528 880.901 710.075 901.851 626.655C889.918 419.884 895.607 96.439 815.737 420.421C726.261 783.37 198.605 707.776 482.586 806.084Z"
            fill="#FF37D3"
          />
          <path
            d="M421.467 1087.59C399.874 1147.35 701.685 1105.73 845.606 1034.52C1037.57 871.621 948.489 635.628 784.641 836.474C735.016 897.304 711.65 1006.29 527.402 1033.8C487.581 1039.74 427.282 1071.5 421.467 1087.59Z"
            fill="white"
          />
        </g>
        <defs>
          <filter
            id="filter0_f_460_2054"
            x="197.295"
            y="416.71"
            width="921.596"
            height="961.033"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2054"
            />
          </filter>
          <filter
            id="filter1_f_460_2054"
            x="152.436"
            y="182.979"
            width="1301.99"
            height="1068.12"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2054"
            />
          </filter>
        </defs>
      </svg>

      <svg
        class="svg-down"
        width="950"
        height="929"
        viewBox="0 0 950 929"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_f_460_2057)">
          <path
            d="M613.553 293.221C626.714 169.617 314.499 287.436 156.747 361.797C20.7272 517.667 380.564 819.157 411.877 664.302C460.927 421.732 413.096 408.868 613.553 293.221Z"
            fill="#3B37FF"
          />
          <path
            d="M610.423 168.243C601.112 260.828 492.746 607.143 420.045 580.046C400.082 835.756 712.002 500.889 720.799 494.284C518.499 495.493 653.262 241.12 610.423 168.243Z"
            fill="#EB1B1B"
          />
        </g>
        <g
          style="mix-blend-mode: color-dodge"
          filter="url(#filter1_f_460_2057)"
        >
          <path
            d="M771.564 401.713C784.725 278.109 472.51 395.928 314.758 470.288C178.738 626.159 538.575 927.649 569.888 772.794C618.938 530.224 571.107 517.359 771.564 401.713Z"
            fill="#3B37FF"
          />
          <path
            d="M511.603 149.647C502.292 242.232 393.926 588.548 321.225 561.45C301.262 817.161 613.182 482.293 621.979 475.688C419.679 476.897 554.442 222.524 511.603 149.647Z"
            fill="#EB1B1B"
          />
        </g>
        <defs>
          <filter
            id="filter0_f_460_2057"
            x="26.1577"
            y="68.2432"
            width="794.641"
            height="739.055"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2057"
            />
          </filter>
          <filter
            id="filter1_f_460_2057"
            x="184.169"
            y="49.6475"
            width="687.798"
            height="866.143"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="50"
              result="effect1_foregroundBlur_460_2057"
            />
          </filter>
        </defs>
      </svg>
      <img id="logo" src="../home/statc/logo_yinta.png" alt="Smiley face" />
      <div id="login">
        <div id="login-2">
          <div id="login-3">
            <el-form
              :model="LoginForm"
              :rules="rules"
              ref="LoginForm"
              label-width="auto"
            >
              <el-form-item prop="username">
                <el-tooltip
                  class="item"
                  effect="dark"
                  content="使用AD账号登录"
                  placement="top-start"
                >
                  <el-input
                    class="loginInput"
                    id="input1"
                    v-model="LoginForm.username"
                    placeholder="请输入账号"
                    @keyup.enter.native="login('LoginForm')"
                    :validate-event="false"
                    @input="
                      LoginForm.username = LoginForm.username.replace(
                        /[\u4E00-\u9FA5]/g,
                        ''
                      )
                    "
                    ><i
                      id="icon1"
                      slot="prefix"
                      class="el-input__icon el-icon-user"
                    ></i
                  ></el-input>
                </el-tooltip>
              </el-form-item>
              <el-form-item prop="password">
                <el-input
                  class="loginInput"
                  id="input2"
                  v-model="LoginForm.password"
                  placeholder="请输入密码"
                  show-password
                  @keyup.enter.native="login('LoginForm')"
                  :validate-event="false"
                  clearable
                  @input="
                    LoginForm.password = LoginForm.password.replace(
                      /[\u4E00-\u9FA5]/g,
                      ''
                    )
                  "
                  ><i
                    id="icon2"
                    slot="prefix"
                    class="el-input__icon el-icon-key"
                  ></i
                ></el-input>
              </el-form-item>
              <button
                class="loginButton"
                id="button1"
                type="button"
                @click="login('LoginForm')"
              >
                登录
              </button>
            </el-form>
          </div>
          <div id="login-4">
            <img
              src="../home/statc/logo_yinta.png"
              alt="Smiley face"
              width="140"
              height="32"
              style="
                position: static;
                width: 176px;
                height: 60px;
                left: 62px;
                top: 0px;
                flex: none;
                order: 0;
                flex-grow: 0;
                margin: 0px 0px;
              "
            />
            <h4
              style="
                position: static;
                width: 200px;
                height: 30px;
                left: 91px;
                top: 60px;

                font-family: 'Source Han Sans CN';
                font-style: normal;
                font-weight: 400;
                font-size: 16px;
                line-height: 24px;
                text-align: center;
                color: #ffffff;
                flex: none;
                order: 1;
                flex-grow: 0;
                margin: 0px 0px;
              "
            >
              Test PlatForm
            </h4>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
// import axios from "axios";
import api from "@/api/api.js";
export default {
  data() {
    return {
      LoginForm: {},
      project_list: [],
      rules: {
        username: [{ required: true, message: "账号不能为空" }],
        password: [{ required: true, message: "密码不能为空" }],
      },
    };
  },
  computed: {},
  methods: {
    //提交登录
    login(LoginForm) {
      this.$refs[LoginForm].validate((valid) => {
        if (valid) {
          this.submitForm();
        } else {
          return false;
        }
      });
    },

    async submitForm() {
      let response = await api.login(this.LoginForm);
      if (response.token && response.token != "") {
        window.localStorage.setItem("token", response.token);
        window.localStorage.setItem(
          "userKey",
          this.keys(this.LoginForm.password)
        );
      }
      if (response.user.usericon && response.user.usericon != "") {
        window.localStorage.setItem("usericon", response.user.usericon);
      }
      if (response.user.nickname && response.user.nickname != "") {
        window.localStorage.setItem("nickname", response.user.nickname);
      }
      if (response.user.username && response.user.username != "") {
        window.localStorage.setItem("username", response.user.username);
      }
      window.localStorage.setItem("activeName", "Auto_manage");
      this.$router.push("/Home");
    },
    keys(string) {
      let Base64 = require("js-base64").Base64;
      let key = "careslten".split("");
      let key_before_string_list = Base64.encode(string).split("");
      let key_after_string = "";
      for (let i = 0; i < key.length; i++) {
        key_before_string_list.splice(i * 2, 0, key[i]);
      }
      key_before_string_list.forEach((item) => {
        key_after_string = key_after_string + item;
      });
      console.log(key_after_string);
      return key_after_string;
    },
  },
};
</script>

<style>
#building {
  background: url("../home/statc/backgroup.png");
  width: 100%;
  height: 100%;
  position: fixed;
  background-size: 100% 100%;
}
#icon1 {
  height: auto;
}
#icon2 {
  height: auto;
}
#login {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  padding: 50px 60px 80px;
  position: absolute;
  width: 350px;
  height: 320px;
  left: 35%;
  top: 28%;

  background: linear-gradient(
    68.8deg,
    rgba(255, 255, 255, 0.2) 10.42%,
    rgba(255, 255, 255, 0.035) 77.11%
  );
  backdrop-filter: blur(70px);
  border-radius: 30px;
}
#login-2 {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  padding: 0px;
  position: static;
  width: 350px;
  height: 284px;
  left: 60px;
  top: 50px;
  flex: none;
  order: 0;
  flex-grow: 0;
  margin: 10px 0px;
}

#login-3 {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  padding: 0px;
  position: static;
  width: 350px;
  height: 150px;
  left: 0px;
  top: 134px;
  flex: none;
  order: 1;
  flex-grow: 0;
  margin: 0;
}
#input1 {
  width: 350px;
  height: 36px;
  /* margin-bottom: 20px; */
  background: linear-gradient(
    68.8deg,
    rgba(255, 255, 255, 0.2) 10.42%,
    rgba(255, 255, 255, 0.035) 77.11%
  );
  backdrop-filter: blur(70px);
  color: white;
}
#input2 {
  width: 350px;
  height: 36px;
  background: linear-gradient(
    68.8deg,
    rgba(255, 255, 255, 0.2) 10.42%,
    rgba(255, 255, 255, 0.035) 77.11%
  );
  backdrop-filter: blur(70px);
  color: white;
}
#button1 {
  width: 350px;
  height: 36px;
  backdrop-filter: blur(70px);
  /* margin-top: 30px; */
  background: rgba(255, 255, 255, 0.3);
  border-radius: 4px 4px 4px 4px;
  opacity: 1;
  color: white;
  letter-spacing: 10px;
  font-size: 15px;
}
#button1:hover {
  background: linear-gradient(315deg, #3f77ff 0%, #00a7ff 100%);
}
#login-4 {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0px;
  position: static;
  width: 350px;
  height: 84px;
  left: 0px;
  top: 0px;
  flex: none;
  order: 0;
  flex-grow: 0;
  margin-bottom: 50px;
}
#logo {
  width: 140px;
  height: 50px;
  position: absolute;
  left: 5%;
  top: 10%;
}

/* 左图动画 */
.svg-left {
  position: fixed;
  left: -35%;
  bottom: -65%;
  animation-name: leftsvg; /* 动画name，与keyframs对应 */
  animation-duration: 5s; /* 动画速率 */
  animation-delay: 1s; /* 延时播放 */
  animation-timing-function: ease;
  animation-iteration-count: infinite; /* 循环播放 */
  animation-direction: alternate;
}
@keyframes leftsvg {
  0% {
    /* 播放开始的位置 */
    left: -35%;
    bottom: -65%;
  }
  100% {
    /* 需要移动的终点 */
    left: -15%;
    bottom: -40%;
  }
}

.svg-top {
  position: fixed;
  top: -45%;
  left: 15%;
  animation-name: topsvg;
  animation-duration: 5s;
  animation-delay: 700ms;
  animation-timing-function: ease;
  animation-iteration-count: infinite;
  animation-direction: alternate;
}
@keyframes topsvg {
  0% {
    top: -45%;
    left: 15%;
  }
  100% {
    top: -30%;
    left: 25%;
  }
}

.svg-right {
  position: fixed;
  right: -55%;
  bottom: -30%;
  animation-name: rightsvg;
  animation-duration: 5s;
  animation-delay: 500ms;
  animation-timing-function: ease;
  animation-iteration-count: infinite;
  animation-direction: alternate;
}
@keyframes rightsvg {
  0% {
    right: -55%;
    bottom: -30%;
  }
  100% {
    right: -40%;
    bottom: -25%;
  }
}
.svg-down {
  position: fixed;
  left: 35%;
  bottom: -50%;
  animation-name: downsvg;
  animation-duration: 5s;
  animation-delay: 200ms;
  animation-timing-function: ease;
  animation-iteration-count: infinite;
  animation-direction: alternate;
}
@keyframes downsvg {
  0% {
    left: 35%;
    bottom: -50%;
  }
  100% {
    left: 40%;
    bottom: -35%;
  }
}
</style>